library(data.table)
library(tidyverse)
getwd()
datasheet <- fread("../Edited Wildlife recovery case study data - Form Responses 1.csv")
View(datasheet)
spread(datasheet$`IUCN status`)
unique(datasheet$`IUCN status`)
datasheet %>% spread()
datasheet %>% spread(`IUCN status`)
datasheet %>% spread(`IUCN status`, n)
install.packages("splitstackshape")
library(splitstackshape)
datasheet %>% select(`IUCN status`) %>% cSplit_e("a", ",", type = "character", fill = 0, drop = TRUE)
datasheet %>% select(`IUCN Threats`) %>% cSplit_e("Agriculture or aquaculture", ",", type = "character", fill = 0, drop = TRUE)
?cSplit_e
datasheet %>% select(`IUCN Threats`) %>% cSplit_e(1, ",", type = "character", fill = 0, drop = TRUE)
datasheet %>% select(colsToSplit[1]) %>% cSplit_e(1, ",", type = "character", fill = 0, drop = TRUE)
#list from data cleaning document
colsToSplit <- c("IUCN Threats", "Goals (Ecological)", "Goals (Socioeconomic)", "Goals (Admin/Logistical)",
"Success Indicators (Ecological)", "Success Indicators (Socioeconomic)",
"Success Indicators (Admin/Logistical)",  "Translocation Type",
"Captive/wild/rehab", "Post Release", "Groups Involved", "Outreach",
"Major Difficulties Faced", "Lessons Learned", "Reasons cited for success (Ecological)",
"Reasons cited for success (socioeconomic)", "Reasons cited for success (Admin/Logistical)",
"Local threats")
datasheet %>% select(colsToSplit[1]) %>% cSplit_e(1, ",", type = "character", fill = 0, drop = TRUE)
datasheet %>% select(colsToSplit[2]) %>% cSplit_e(1, ",", type = "character", fill = 0, drop = TRUE)
length(colsToSplit)
datasheet %>% select(colsToSplit[17]) %>% cSplit_e(1, ",", type = "character", fill = 0, drop = TRUE)
colsToSplit[17]
datasheet %>% select(colsToSplit[17]) %>% cSplit_e(1, ",", type = "character", fill = 0, drop = TRUE)
datasheet[colsToSplitp[17]]
datasheet[colsToSplit[17]]
datasheet %>% select(colsToSplit[12]) %>% cSplit_e(1, ",", type = "character", fill = 0, drop = TRUE)
datasheet %>% select(colsToSplit[16]) %>% cSplit_e(1, ",", type = "character", fill = 0, drop = TRUE)
datasheet %>% select(colsToSplit[15]) %>% cSplit_e(1, ",", type = "character", fill = 0, drop = TRUE)
colnames(datasheet)
datasheet %>% select(colsToSplit[16]) %>% cSplit_e(1, ",", type = "character", fill = 0, drop = TRUE)
#list from data cleaning document
colsToSplit <- c("IUCN Threats", "Goals (Ecological)", "Goals (Socioeconomic)", "Goals (Admin/Logistical)",
"Success Indicators (Ecological)", "Success Indicators (Socioeconomic)",
"Success Indicators (Admin/Logistical)",  "Translocation Type",
"Captive/wild/rehab", "Post Release", "Groups Involved", "Outreach",
"Major Difficulties Faced", "Lessons Learned", "Reasons cited for success (Ecological)",
"Reasons cited for success (Socioeconomic)", "Reasons cited for success (Admin/Logistic)",
"Local threats")
datasheet %>% select(colsToSplit[16]) %>% cSplit_e(1, ",", type = "character", fill = 0, drop = TRUE)
datasheet %>% select(colsToSplit[16]) %>% cSplit_e(1, ",", type = "character", fill = 0, drop = TRUE)
install.packages("Hmisc")
library(Hmisc)
colsToSplit %nin% colnames(datasheet)
colsToSplit %nin% colnames(datasheet) %>%> which()
colsToSplit %nin% colnames(datasheet) %>% which()
colsToSplit[11]
colnames(datasheet)
colsToSplit %nin% colnames(datasheet) %>% which()
#list from data cleaning document
colsToSplit <- c("IUCN Threats", "Goals (Ecological)", "Goals (Socioeconomic)", "Goals (Admin/Logistical)",
"Success Indicators (Ecological)", "Success Indicators (Socioeconomic)",
"Success Indicators (Admin/Logistical)",  "Translocation Type",
"Captive/wild/rehab", "Post Release", "Groups involved", "Outreach",
"Major Difficulties Faced", "Lessons Learned", "Reasons cited for success (Ecological)",
"Reasons Cited for Success (Socioeconomic)", "Reasons cited for success (Admin/Logistic)",
"Local threats")
colsToSplit %nin% colnames(datasheet) %>% which()
colnames(datasheet)[13]
colsToSplit[13]
colnames(datasheet)
#list from data cleaning document
colsToSplit <- c("IUCN Threats", "Goals (Ecological)", "Goals (Socioeconomic)", "Goals (Admin/Logistical)",
"Success Indicators (Ecological)", "Success Indicators (Socioeconomic)",
"Success Indicators (Admin/Logistical)",  "Translocation Type",
"Captive/wild/rehab", "Post Release", "Groups involved", "Outreach",
"Major difficulties faced (Ecological)",      "Major difficulties faced (Socioeconomic)" ,
"Major difficulties faced (Admin/Logistic)" , "Lessons Learned", "Reasons cited for success (Ecological)",
"Reasons Cited for Success (Socioeconomic)", "Reasons cited for success (Admin/Logistic)",
"Local threats")
colsToSplit %nin% colnames(datasheet) %>% which()
colsToSplit[16]
colnames(datasheet)
#list from data cleaning document
colsToSplit <- c("IUCN Threats", "Goals (Ecological)", "Goals (Socioeconomic)", "Goals (Admin/Logistical)",
"Success Indicators (Ecological)", "Success Indicators (Socioeconomic)",
"Success Indicators (Admin/Logistical)",  "Translocation Type",
"Captive/wild/rehab", "Post Release", "Groups involved", "Outreach",
"Major difficulties faced (Ecological)",      "Major difficulties faced (Socioeconomic)" ,
"Major difficulties faced (Admin/Logistic)" , "Lessons learned (Ecological)"
"Lessons learned (Socioeconomic)",  "Lessons learned (Admin/Logistic)",  "Reasons cited for success (Ecological)",
"Reasons Cited for Success (Socioeconomic)", "Reasons cited for success (Admin/Logistic)",
"Local threats")
#list from data cleaning document
colsToSplit <- c("IUCN Threats", "Goals (Ecological)", "Goals (Socioeconomic)", "Goals (Admin/Logistical)",
"Success Indicators (Ecological)", "Success Indicators (Socioeconomic)",
"Success Indicators (Admin/Logistical)",  "Translocation Type",
"Captive/wild/rehab", "Post Release", "Groups involved", "Outreach",
"Major difficulties faced (Ecological)",      "Major difficulties faced (Socioeconomic)" ,
"Major difficulties faced (Admin/Logistic)" , "Lessons learned (Ecological)" ,
"Lessons learned (Socioeconomic)",  "Lessons learned (Admin/Logistic)",  "Reasons cited for success (Ecological)",
"Reasons Cited for Success (Socioeconomic)", "Reasons cited for success (Admin/Logistic)",
"Local threats")
#function to split column into multiple columns containing 0/1 values for each unique value in original column
splitColumn <- function (colName) {
datasheet %>% select(colName) %>% cSplit_e(1, ",", type = "character", fill = 0, drop = TRUE)
}
splitColumn(colsToSplit[1])
map_dfc(colsToSplit, splitColumn)
datasheetSplit <- map_dfc(colsToSplit, splitColumn)
View(datasheetSplit)
library(data.table)
library(tidyverse)
library(Hmisc)
setwd("/Users/gzuckerman/Desktop/middletonLab/wildlife_recovery")
#temporary datasheet without 2021 case studies
datasheet <- fread("../Edited Wildlife recovery case study data - Form Responses 1.csv")
library(splitstackshape)
#list from data cleaning document
colsToSplit <- c("IUCN Threats", "Goals (Ecological)", "Goals (Socioeconomic)", "Goals (Admin/Logistical)",
"Success Indicators (Ecological)", "Success Indicators (Socioeconomic)",
"Success Indicators (Admin/Logistical)",  "Translocation Type",
"Captive/wild/rehab", "Post Release", "Groups involved", "Outreach",
"Major difficulties faced (Ecological)",      "Major difficulties faced (Socioeconomic)" ,
"Major difficulties faced (Admin/Logistic)" , "Lessons learned (Ecological)" ,
"Lessons learned (Socioeconomic)",  "Lessons learned (Admin/Logistic)",  "Reasons cited for success (Ecological)",
"Reasons Cited for Success (Socioeconomic)", "Reasons cited for success (Admin/Logistic)",
"Local threats")
#function to split column into multiple columns containing 0/1 values for each unique value in original column
splitColumn <- function (colName) {
datasheet %>% select(colName) %>% cSplit_e(1, ",", type = "character", fill = 0, drop = TRUE)
}
#merged all split up columns
datasheetSplit <- map_dfc(colsToSplit, splitColumn)
#next step is to decide what other columns we want to keep (eg outcome, locations, ...)
#also need to decide on summary columns, ie any mention of outreach
View(datasheetSplit)
head(datasheet)
View(datasheetSplit)
